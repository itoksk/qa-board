# 教育イベントQA集約ボード システム要件定義書

## 1. プロジェクト概要

### 1.1 システム名
**QA Board** - 教育イベント質問集約システム

### 1.2 ビジョン
全国5都市で開催される教育イベントにおいて、参加者からの質問を効率的に収集・管理し、AIを活用して価値ある洞察を提供する次世代型質問管理プラットフォーム

### 1.3 目的
- 地域別の教育現場における課題や関心事の可視化
- リアルタイムでの質問収集と効率的な情報共有
- AI技術を活用した質問の自動集約と洞察の抽出
- イベント運営の効率化と参加者満足度の向上

### 1.4 対象ユーザー
- **参加者**: イベントに参加する教育関係者、学習者、保護者
- **運営者**: イベント主催者、ファシリテーター、講師
- **分析者**: 教育政策立案者、研究者

## 2. 機能要件

### 2.1 質問投稿機能
#### 2.1.1 基本機能
- **地域選択**: 大阪、名古屋、福岡、広島、東京から選択（必須）
- **カテゴリ分類**: 生成AI、教育、ICT、その他（必須）
- **質問入力**: 自由記述形式（最大1000文字）
- **投稿者情報**: 名前（任意）、匿名投稿対応
- **タイムスタンプ**: 自動記録

#### 2.1.2 拡張機能
- **画像添付**: スクリーンショットや図表の添付（最大3枚）
- **緊急度設定**: 高・中・低の3段階
- **関連タグ**: 自動サジェスト機能付き
- **下書き保存**: ローカルストレージでの一時保存

### 2.2 質問閲覧機能
#### 2.2.1 表示機能
- **リスト表示**: カード形式での一覧表示
- **フィルタリング**: 地域、カテゴリ、日時、処理状態
- **並び替え**: 新着順、人気順、緊急度順
- **検索機能**: キーワード検索、全文検索対応

#### 2.2.2 インタラクション
- **いいね機能**: 参加者による共感表明
- **類似質問表示**: AI による関連質問の自動表示
- **回答状況**: 回答済み/未回答のステータス表示

### 2.3 代表質問生成機能（AI機能）
#### 2.3.1 生成プロセス
- **地域選択**: 単一地域または全地域選択
- **集約アルゴリズム**: 
  - **ベクトル化**: 質問文のテキスト埋め込み生成
    - 日本語対応の事前学習済みモデル使用（BERT/Sentence-BERT）
    - 各質問を高次元ベクトル空間に変換
  - **クラスタリング**: K-Meansアルゴリズム
    - 最適クラスタ数の動的決定（エルボー法/シルエット分析）
    - ユークリッド距離による類似質問のグループ化
  - **代表質問選定**:
    - 各クラスタの重心に最も近い質問を選択
    - クラスタ内の質問を要約して新規生成（Gemini API）
  - **重要度スコアリング**: 
    - 質問頻度（クラスタサイズ）
    - 緊急度フラグの集計
    - いいね数の合計
- **処理オプション**:
  - 通常生成: 未処理質問のみ対象
  - 強制再生成: 全質問を対象

#### 2.3.2 生成結果管理
- **代表質問の構造**:
  - タイトル（30文字以内）
  - 詳細説明（200文字以内）
  - 元質問リスト（折りたたみ表示）
  - 生成メタデータ（日時、対象数、地域）
- **バージョン管理**: 生成履歴の保存と比較
- **エクスポート**: PDF、CSV形式での出力

### 2.4 データ連携機能
#### 2.4.1 Google Sheets連携
- **スプレッドシートID**: `1Fr8mA0Kfcz_emCpFH1V7yDiytyxiuLTEcPWD0ifn_q0`
- **自動同期**: 
  - 質問投稿時のリアルタイム書き込み
  - 5分間隔でのバックアップ
- **シート構成**:
  - 元質問シート: 全質問データ
  - 地域別シート: 5地域分のフィルタビュー
  - 代表質問シート: 生成結果の保存
  - 分析シート: 統計情報とダッシュボード

#### 2.4.2 外部連携
- **Slack通知**: 新規質問、代表質問生成時
- **メール配信**: 日次サマリーレポート
- **API提供**: RESTful API（将来実装）

### 2.5 管理機能
#### 2.5.1 認証・権限
- **パスワード認証**: 管理機能アクセス時（パスワード: `ictedu`）
- **権限レベル**:
  - 参加者: 投稿、閲覧
  - モデレーター: 質問編集、削除
  - 管理者: 全機能アクセス

#### 2.5.2 モデレーション
- **不適切コンテンツ検出**: AI による自動フラグ
- **手動レビュー**: フラグ付き質問の確認
- **一括操作**: 複数質問の状態変更

## 3. 非機能要件

### 3.1 パフォーマンス要件
- **応答時間**: 
  - ページ読み込み: 3秒以内
  - 質問投稿: 1秒以内
  - AI生成: 30秒以内
- **同時接続数**: 最大1000ユーザー
- **データ容量**: 10万質問まで対応

### 3.2 ユーザビリティ要件
- **レスポンシブデザイン**: スマートフォン、タブレット、PC対応
- **アクセシビリティ**: WCAG 2.1 Level AA準拠
- **多言語対応**: 日本語、英語（将来実装）

### 3.3 セキュリティ要件
- **通信暗号化**: HTTPS必須
- **データ保護**: 個人情報の暗号化保存
- **アクセス制御**: IPアドレス制限（管理機能）
- **監査ログ**: 全操作の記録

### 3.4 可用性要件
- **稼働率**: 99.5%以上
- **バックアップ**: 日次自動バックアップ
- **災害復旧**: RPO 24時間、RTO 4時間

## 4. システム構成

### 4.1 技術スタック
#### フロントエンド
- **フレームワーク**: Vanilla JavaScript（軽量実装）
- **UIライブラリ**: Tailwind CSS（CDN版）
- **アイコン**: Heroicons
- **グラフ**: Chart.js（統計表示用）

#### AI/ML
- **テキストベクトル化**: 
  - 日本語BERT（cl-tohoku/bert-base-japanese）
  - Sentence-BERT（sonoisa/sentence-bert-base-ja-mean-tokens）
- **クラスタリング**: 
  - scikit-learn K-Means
  - NumPy（ベクトル演算）
- **代表質問生成**: Google Gemini API
- **類似度計算**: コサイン類似度/ユークリッド距離
- **不適切検出**: Perspective API

#### インフラ
- **ホスティング**: Google Apps Script
- **CDN**: Cloudflare

### 4.2 データモデル

#### 質問データ
```json
{
  "id": "UUID",
  "region": "tokyo|osaka|nagoya|fukuoka|hiroshima",
  "category": "ai|education|ict|other",
  "content": "質問内容",
  "author": "投稿者名（任意）",
  "timestamp": "2024-01-20T14:30:00Z",
  "status": "new|processed|answered",
  "flags": {
    "processed": false,
    "inappropriate": false,
    "urgent": false
  },
  "metadata": {
    "likes": 0,
    "views": 0,
    "device": "mobile|desktop",
    "ip_hash": "ハッシュ化IPアドレス"
  }
}
```

#### 代表質問データ
```json
{
  "id": "UUID",
  "title": "代表質問タイトル",
  "description": "詳細説明",
  "region": "all|tokyo|osaka|...",
  "source_questions": ["質問ID1", "質問ID2", ...],
  "generated_at": "2024-01-20T15:00:00Z",
  "generation_params": {
    "force_regenerate": false,
    "algorithm_version": "1.0"
  },
  "statistics": {
    "total_questions": 10,
    "similarity_score": 0.85
  }
}
```

## 5. 画面設計

### 5.1 画面一覧
1. **ホーム画面**: ヒーローセクション、主要アクション
2. **質問投稿画面**: 投稿フォーム
3. **質問一覧画面**: フィルタ、検索、カード表示
4. **代表質問一覧画面**: 生成結果の表示
5. **管理画面**: 代表質問生成、統計表示

### 5.2 UI/UXガイドライン
- **カラーパレット**:
  - Primary: #6366f1（インディゴ）
  - Secondary: #8b5cf6（バイオレット）
  - Background: #111827（グレー900）
  - Surface: rgba(255,255,255,0.05)
- **タイポグラフィ**: Inter フォントファミリー
- **アニメーション**: スムーズな遷移（200ms）
- **フィードバック**: トースト通知、ローディング表示

## 6. 運用要件

### 6.1 運用体制
- **システム管理者**: 1名（技術サポート）
- **コンテンツ管理者**: 各地域1名
- **サポート窓口**: メール対応

### 6.2 運用フロー
1. **イベント前準備**:
   - システム設定確認
   - テストデータクリア
   - 参加者向け利用ガイド配布
2. **イベント中**:
   - リアルタイムモニタリング
   - 緊急対応（システム障害時）
3. **イベント後**:
   - データエクスポート
   - 分析レポート作成
   - アーカイブ処理

### 6.3 SLA（サービスレベル契約）
- **可用性**: 99.5%（月間）
- **レスポンスタイム**: 95%が3秒以内
- **サポート対応時間**: 平日9:00-18:00

## 7. 今後の拡張計画

### Phase 2（3ヶ月後）
- リアルタイム回答機能
- 講師向けダッシュボード
- モバイルアプリ開発

### Phase 3（6ヶ月後）
- 音声質問対応
- 多言語自動翻訳
- AIによる回答提案

### Phase 4（1年後）
- 他イベントへの展開
- SaaS化
- 分析API公開

## 8. リスクと対策

### 8.1 技術リスク
- **AIサービス障害**: フォールバック処理実装
- **データ損失**: 多重バックアップ
- **セキュリティ侵害**: 定期的な脆弱性診断

### 8.2 運用リスク
- **想定外アクセス集中**: オートスケーリング
- **不適切コンテンツ**: AI+人力の二重チェック
- **個人情報漏洩**: 最小限の情報収集

## 9. 成功指標（KPI）

### 9.1 利用率指標
- アクティブユーザー数: イベント参加者の80%以上
- 質問投稿数: 1イベントあたり100件以上
- 代表質問生成数: 1イベントあたり20件以上

### 9.2 品質指標
- システム稼働率: 99.5%以上
- ユーザー満足度: 4.0/5.0以上
- AI生成精度: 関連性スコア85%以上

### 9.3 ビジネス指標
- イベント運営効率: 30%向上
- 参加者エンゲージメント: 50%向上
- 知見の再利用率: 70%以上

---

**文書情報**
- バージョン: 1.0
- 作成日: 2024年1月20日
- 作成者: QA Board開発チーム
- 最終更新: 2024年1月20日